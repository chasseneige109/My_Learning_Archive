### 1. 식의 유도 과정 (왜 이 연산을 하는가?)

Homography의 기본 식은 다음과 같습니다:

$$x_2 \times (H x_1) = 0$$

(두 벡터가 나란하므로 외적하면 0이라는 뜻입니다.)

이 식을 다시 쓰면 $\hat{x}_2 H x_1 = 0$ 이 되는데, 여기서 행렬 $H$를 벡터 $h = \text{vec}(H)$로 뽑아내고 싶을 때 **크로네커 곱의 성질**($\text{vec}(ABC) = (C^T \otimes A)\text{vec}(B)$)을 이용합니다.

그 결과, 우리가 풀어야 할 식은 다음과 같은 형태가 됩니다:

$$(x_1^T \otimes \hat{x}_2) h = 0$$

### 2. 구체적인 연산 방법 ($x_1^T \otimes \hat{x}_2$)

$x_1^T$는 $1 \times 3$ 행렬이고, $\hat{x}_2$는 $3 \times 3$ 행렬입니다. 이 둘의 크로네커 곱은 **$3 \times 9$ 행렬**을 만듭니다.

$x_1 = (u_1, v_1, 1)^T$ 이고 $\hat{x}_2$가 $3 \times 3$ 스큐 행렬일 때:

$$x_1^T \otimes \hat{x}_2 = \begin{pmatrix} u_1 \hat{x}_2 & v_1 \hat{x}_2 & 1 \hat{x}_2 \end{pmatrix}$$

즉, $\hat{x}_2$라는 $3 \times 3$ 덩어리에 $u_1$을 다 곱하고, 그 옆에 $v_1$ 곱한 덩어리, 그 옆에 그냥 $\hat{x}_2$ 덩어리를 가로로 쭉 붙이는 것입니다.

### 3. 실제 행렬의 모습

이를 다 펼쳐보면 우리가 DLT 알고리즘에서 흔히 보는 그 행렬이 나옵니다:

$$\begin{pmatrix} 0 & -u_1 & u_1 v_2 & 0 & -v_1 & v_1 v_2 & 0 & -1 & v_2 \\ u_1 & 0 & -u_1 u_2 & v_1 & 0 & -v_1 u_2 & 1 & 0 & -u_2 \\ -u_1 v_2 & u_1 u_2 & 0 & -v_1 v_2 & v_1 u_2 & 0 & -v_2 & u_2 & 0 \end{pmatrix} \begin{pmatrix} h_{11} \\ h_{12} \\ \vdots \\ h_{33} \end{pmatrix} = \begin{pmatrix} 0 \\ 0 \\ 0 \end{pmatrix}$$

_(참고: 세 번째 줄은 앞의 두 줄의 선형 결합이라 실제로는 위 2줄만 사용해서 점 하나당 2개의 식을 얻습니다.)_

---

### 4. 요약

- **연산 대상:** $1 \times 3$ 벡터와 $3 \times 3$ 행렬의 크로네커 곱.
    
- **결과값:** 점 1쌍당 **$3 \times 9$ 행렬** (실질적으로는 의미 있는 **$2 \times 9$ 행렬**).
    
- **의미:** $H$의 9개 원소를 미지수로 하는 선형 방정식을 만들기 위해, 각 픽셀 좌표들을 $H$가 곱해지는 위치에 맞게 적재적소에 배치하는 연산입니다.
    

이제 왜 슬라이드에서 $x_1$과 $\hat{x}_2$의 크로네커 곱이라고 표현했는지 이해가 가시나요? 결국 **"점 1쌍으로 식 2줄(Row)을 뽑아내기 위한 행렬 배치기"**라고 생각하시면 됩니다!

Homography에서는 이 행렬들을 쌓아서 $Ah=0$을 풀게 되는데, 여기서도 SVD를 써서 $h$를 구하는 과정으로 이어지나요? 8-point 알고리즘 때와 비슷하면서도 살짝 다른 이 흐름이 잡히시는지 궁금합니다.